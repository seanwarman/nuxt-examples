FROM node:12.18

ARG API_ENDPOINT
ARG API_BROWSER_ENDPOINT
ARG CMS_API_URL
ARG CMS_API_URL_BROWSER
ARG ENVIRONMENT

ENV API_ENDPOINT=${API_ENDPOINT}
ENV API_BROWSER_ENDPOINT=${API_BROWSER_ENDPOINT}
ENV CMS_API_URL=${CMS_API_URL}
ENV CMS_API_URL_BROWSER=${CMS_API_URL_BROWSER}
ENV ENVIRONMENT=${ENVIRONMENT}


COPY . /app
WORKDIR /app
RUN yarn install --frozen-lockfile --silent && yarn build

EXPOSE 3000

CMD ["scripts/init.sh"]
